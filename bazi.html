<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç”Ÿè¾°å…«å­—æŸ¥è¯¢å·¥å…·</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Microsoft Yahei', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .container {
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            max-width: 600px;
            width: 100%;
        }
        
        h1 {
            text-align: center;
            color: #667eea;
            margin-bottom: 10px;
            font-size: 28px;
        }
        
        .subtitle {
            text-align: center;
            color: #888;
            margin-bottom: 30px;
            font-size: 14px;
        }
        
        .input-group {
            margin-bottom: 25px;
        }
        
        label {
            display: block;
            margin-bottom: 10px;
            color: #555;
            font-weight: 500;
            font-size: 15px;
        }
        
        .date-selector {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr;
            gap: 10px;
        }
        
        .time-selector {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }
        
        select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 15px;
            background-color: #f9f9f9;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        select:focus {
            outline: none;
            border-color: #667eea;
            background-color: white;
        }
        
        select:hover {
            border-color: #999;
        }
        
        button {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }
        
        button:active {
            transform: translateY(0);
        }
        
        .result {
            margin-top: 30px;
            padding: 25px;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 12px;
            display: none;
        }
        
        .result.show {
            display: block;
            animation: fadeIn 0.5s;
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .result h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 18px;
            border-bottom: 2px solid #667eea;
            padding-bottom: 8px;
        }
        
        .result-item {
            margin-bottom: 12px;
            line-height: 1.8;
            font-size: 15px;
        }
        
        .result-label {
            display: inline-block;
            width: 120px;
            font-weight: 500;
            color: #555;
        }
        
        .result-value {
            color: #333;
            font-weight: 600;
        }
        
        .bazi-chars {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-top: 15px;
        }
        
        .bazi-item {
            text-align: center;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .bazi-label {
            font-size: 12px;
            color: #888;
            margin-bottom: 5px;
        }
        
        .bazi-value {
            font-size: 20px;
            font-weight: bold;
            color: #667eea;
        }
        
        .warning {
            margin-top: 15px;
            padding: 12px;
            background-color: #fff3cd;
            color: #856404;
            border-radius: 8px;
            font-size: 13px;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸŒ™ ç”Ÿè¾°å…«å­—æŸ¥è¯¢å·¥å…·</h1>
        <p class="subtitle">è¾“å…¥é˜³å†ç”Ÿæ—¥ï¼ŒæŸ¥è¯¢é˜´å†ç”Ÿè¾°å…«å­—</p>
        
        <div class="input-group">
            <label>ğŸ“… é€‰æ‹©å‡ºç”Ÿæ—¥æœŸï¼ˆé˜³å†ï¼‰</label>
            <div class="date-selector">
                <select id="yearSelect"></select>
                <select id="monthSelect"></select>
                <select id="daySelect"></select>
            </div>
        </div>
        
        <div class="input-group">
            <label>â° é€‰æ‹©å‡ºç”Ÿæ—¶è¾°</label>
            <div class="time-selector">
                <select id="hourSelect"></select>
                <select id="minuteSelect"></select>
            </div>
        </div>
        
        <button id="calculateBtn">å¼€å§‹æŸ¥è¯¢</button>
        
        <div class="result" id="resultBox">
            <h3>ğŸ“Š æŸ¥è¯¢ç»“æœ</h3>
            
            <div class="result-item">
                <span class="result-label">é˜³å†ç”Ÿæ—¥ï¼š</span>
                <span class="result-value" id="solarDate"></span>
            </div>
            
            <div class="result-item">
                <span class="result-label">é˜´å†ç”Ÿæ—¥ï¼š</span>
                <span class="result-value" id="lunarDate"></span>
            </div>
            
            <div class="result-item">
                <span class="result-label">ç”Ÿè‚–å±ç›¸ï¼š</span>
                <span class="result-value" id="zodiac"></span>
            </div>
            
            <h3 style="margin-top: 20px;">ğŸ‹ ç”Ÿè¾°å…«å­—</h3>
            <div class="bazi-chars">
                <div class="bazi-item">
                    <div class="bazi-label">å¹´æŸ±</div>
                    <div class="bazi-value" id="yearPillar">ç”²å­</div>
                </div>
                <div class="bazi-item">
                    <div class="bazi-label">æœˆæŸ±</div>
                    <div class="bazi-value" id="monthPillar">ä¹™ä¸‘</div>
                </div>
                <div class="bazi-item">
                    <div class="bazi-label">æ—¥æŸ±</div>
                    <div class="bazi-value" id="dayPillar">ä¸™å¯…</div>
                </div>
                <div class="bazi-item">
                    <div class="bazi-label">æ—¶æŸ±</div>
                    <div class="bazi-value" id="hourPillar">ä¸å¯</div>
                </div>
            </div>
            
            <div class="result-item" style="margin-top: 20px;">
                <span class="result-label">äº”è¡Œå‘½æ•°ï¼š</span>
                <span class="result-value" id="wuxing"></span>
            </div>
            
            <div class="warning">
                âš ï¸ æ³¨ï¼šæœ¬å·¥å…·ä»…ä¾›å¨±ä¹å‚è€ƒï¼Œä¸å…·å¤‡ç§‘å­¦ä¾æ®
            </div>
        </div>
    </div>

    <script>
        // å¤©å¹²åœ°æ”¯
        const tianGan = ['ç”²', 'ä¹™', 'ä¸™', 'ä¸', 'æˆŠ', 'å·±', 'åºš', 'è¾›', 'å£¬', 'ç™¸'];
        const diZhi = ['å­', 'ä¸‘', 'å¯…', 'å¯', 'è¾°', 'å·³', 'åˆ', 'æœª', 'ç”³', 'é…‰', 'æˆŒ', 'äº¥'];
        const zodiacAnimals = ['é¼ ', 'ç‰›', 'è™', 'å…”', 'é¾™', 'è›‡', 'é©¬', 'ç¾Š', 'çŒ´', 'é¸¡', 'ç‹—', 'çŒª'];
        
        // å…­åç”²å­çº³éŸ³äº”è¡Œå¯¹ç…§è¡¨
        const nayin = [
            'æµ·ä¸­é‡‘', 'æµ·ä¸­é‡‘', 'ç‚‰ä¸­ç«', 'ç‚‰ä¸­ç«', 'å¤§æ—æœ¨', 'å¤§æ—æœ¨', 'è·¯æ—åœŸ', 'è·¯æ—åœŸ', 'å‰‘é”‹é‡‘', 'å‰‘é”‹é‡‘',
            'å±±å¤´ç«', 'å±±å¤´ç«', 'æ¶§ä¸‹æ°´', 'æ¶§ä¸‹æ°´', 'åŸå¤´åœŸ', 'åŸå¤´åœŸ', 'ç™½èœ¡é‡‘', 'ç™½èœ¡é‡‘', 'æ¨æŸ³æœ¨', 'æ¨æŸ³æœ¨',
            'æ³‰ä¸­æ°´', 'æ³‰ä¸­æ°´', 'å±‹ä¸ŠåœŸ', 'å±‹ä¸ŠåœŸ', 'éœ¹é›³ç«', 'éœ¹é›³ç«', 'æ¾æŸæœ¨', 'æ¾æŸæœ¨', 'é•¿æµæ°´', 'é•¿æµæ°´',
            'æ²™ä¸­é‡‘', 'æ²™ä¸­é‡‘', 'å±±ä¸‹ç«', 'å±±ä¸‹ç«', 'å¹³åœ°æœ¨', 'å¹³åœ°æœ¨', 'å£ä¸ŠåœŸ', 'å£ä¸ŠåœŸ', 'é‡‘ç®”é‡‘', 'é‡‘ç®”é‡‘',
            'è¦†ç¯ç«', 'è¦†ç¯ç«', 'å¤©æ²³æ°´', 'å¤©æ²³æ°´', 'å¤§é©¿åœŸ', 'å¤§é©¿åœŸ', 'é’—é’é‡‘', 'é’—é’é‡‘', 'æ¡‘æŸ˜æœ¨', 'æ¡‘æŸ˜æœ¨',
            'å¤§æºªæ°´', 'å¤§æºªæ°´', 'æ²™ä¸­åœŸ', 'æ²™ä¸­åœŸ', 'å¤©ä¸Šç«', 'å¤©ä¸Šç«', 'çŸ³æ¦´æœ¨', 'çŸ³æ¦´æœ¨', 'å¤§æµ·æ°´', 'å¤§æµ·æ°´'
        ];
        
        const wuxingMap = {
            'ç”²': 'æœ¨', 'ä¹™': 'æœ¨',
            'ä¸™': 'ç«', 'ä¸': 'ç«',
            'æˆŠ': 'åœŸ', 'å·±': 'åœŸ',
            'åºš': 'é‡‘', 'è¾›': 'é‡‘',
            'å£¬': 'æ°´', 'ç™¸': 'æ°´'
        };
        
        // æ—¶è¾°å¯¹ç…§è¡¨
        const shiChen = [
            { name: 'å­æ—¶', range: '23:00-01:00', zhi: 'å­' },
            { name: 'ä¸‘æ—¶', range: '01:00-03:00', zhi: 'ä¸‘' },
            { name: 'å¯…æ—¶', range: '03:00-05:00', zhi: 'å¯…' },
            { name: 'å¯æ—¶', range: '05:00-07:00', zhi: 'å¯' },
            { name: 'è¾°æ—¶', range: '07:00-09:00', zhi: 'è¾°' },
            { name: 'å·³æ—¶', range: '09:00-11:00', zhi: 'å·³' },
            { name: 'åˆæ—¶', range: '11:00-13:00', zhi: 'åˆ' },
            { name: 'æœªæ—¶', range: '13:00-15:00', zhi: 'æœª' },
            { name: 'ç”³æ—¶', range: '15:00-17:00', zhi: 'ç”³' },
            { name: 'é…‰æ—¶', range: '17:00-19:00', zhi: 'é…‰' },
            { name: 'æˆŒæ—¶', range: '19:00-21:00', zhi: 'æˆŒ' },
            { name: 'äº¥æ—¶', range: '21:00-23:00', zhi: 'äº¥' }
        ];
        
        // åˆå§‹åŒ–é€‰æ‹©å™¨
        function initSelectors() {
            const yearSelect = document.getElementById('yearSelect');
            const monthSelect = document.getElementById('monthSelect');
            const daySelect = document.getElementById('daySelect');
            const hourSelect = document.getElementById('hourSelect');
            const minuteSelect = document.getElementById('minuteSelect');
            
            // å¹´ä»½ï¼š1900-2100
            for (let i = 1900; i <= 2100; i++) {
                const option = document.createElement('option');
                option.value = i;
                option.textContent = i + 'å¹´';
                if (i === 1990) option.selected = true;
                yearSelect.appendChild(option);
            }
            
            // æœˆä»½ï¼š1-12
            for (let i = 1; i <= 12; i++) {
                const option = document.createElement('option');
                option.value = i;
                option.textContent = i + 'æœˆ';
                if (i === 1) option.selected = true;
                monthSelect.appendChild(option);
            }
            
            // æ—¥æœŸï¼š1-31ï¼ˆåŠ¨æ€æ›´æ–°ï¼‰
            updateDays();
            
            // å°æ—¶ï¼š0-23
            for (let i = 0; i <= 23; i++) {
                const option = document.createElement('option');
                option.value = i;
                option.textContent = String(i).padStart(2, '0') + 'æ—¶';
                if (i === 0) option.selected = true;
                hourSelect.appendChild(option);
            }
            
            // åˆ†é’Ÿï¼š0-59ï¼ˆæ¯5åˆ†é’Ÿï¼‰
            for (let i = 0; i < 60; i += 5) {
                const option = document.createElement('option');
                option.value = i;
                option.textContent = String(i).padStart(2, '0') + 'åˆ†';
                if (i === 0) option.selected = true;
                minuteSelect.appendChild(option);
            }
            
            // ç›‘å¬å¹´æœˆå˜åŒ–ï¼Œæ›´æ–°æ—¥æœŸ
            yearSelect.addEventListener('change', updateDays);
            monthSelect.addEventListener('change', updateDays);
        }
        
        // æ›´æ–°æ—¥æœŸé€‰æ‹©å™¨
        function updateDays() {
            const yearSelect = document.getElementById('yearSelect');
            const monthSelect = document.getElementById('monthSelect');
            const daySelect = document.getElementById('daySelect');
            
            const year = parseInt(yearSelect.value);
            const month = parseInt(monthSelect.value);
            const daysInMonth = new Date(year, month, 0).getDate();
            
            const currentDay = parseInt(daySelect.value) || 1;
            daySelect.innerHTML = '';
            
            for (let i = 1; i <= daysInMonth; i++) {
                const option = document.createElement('option');
                option.value = i;
                option.textContent = i + 'æ—¥';
                if (i === Math.min(currentDay, daysInMonth)) option.selected = true;
                daySelect.appendChild(option);
            }
        }
        
        // è·å–å¹²æ”¯çºªå¹´
        function getGanZhi(year) {
            const ganIndex = (year - 4) % 10;
            const zhiIndex = (year - 4) % 12;
            return tianGan[ganIndex] + diZhi[zhiIndex];
        }
        
        // è·å–å…­åç”²å­åºå·ï¼ˆ0-59ï¼‰
        function getJiaZiIndex(year) {
            // å…¬å…ƒ4å¹´æ˜¯ç”²å­å¹´ï¼Œä»¥æ­¤ä¸ºåŸºå‡†
            return (year - 4) % 60;
        }
        
        // æ ¹æ®å¹´ä»½è·å–çº³éŸ³äº”è¡Œ
        function getNaYin(year) {
            const index = getJiaZiIndex(year);
            return nayin[index];
        }
        
        // è·å–ç”Ÿè‚–
        function getZodiac(year) {
            return zodiacAnimals[(year - 4) % 12];
        }
        
        // ç®€åŒ–çš„é˜´å†è½¬æ¢ï¼ˆè¿™é‡Œä½¿ç”¨è¿‘ä¼¼ç®—æ³•ï¼Œå®é™…åº”ç”¨éœ€è¦å®Œæ•´çš„ä¸‡å¹´å†æ•°æ®ï¼‰
        function solarToLunar(year, month, day) {
            // è¿™æ˜¯ä¸€ä¸ªç®€åŒ–ç‰ˆæœ¬ï¼Œå®é™…é¡¹ç›®ä¸­éœ€è¦ä½¿ç”¨å®Œæ•´çš„å†œå†ç®—æ³•åº“
            // è¿™é‡Œä»…åšæ¼”ç¤ºï¼Œè¿”å›ä¸€ä¸ªè¿‘ä¼¼å€¼
            const lunarMonths = ['æ­£', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­', 'ä¸ƒ', 'å…«', 'ä¹', 'å', 'å†¬', 'è…Š'];
            const approxMonth = ((month + 1) % 12);
            const approxDay = Math.max(1, day - 10);
            
            return {
                year: year,
                month: lunarMonths[approxMonth],
                day: approxDay
            };
        }
        
        // æ ¹æ®æ—¶è¾°è·å–åœ°æ”¯
        function getHourZhi(hour) {
            if (hour === 23 || hour === 0) return 'å­';
            const index = Math.floor((hour + 1) / 2);
            return shiChen[index].zhi;
        }
        
        // è·å–æ—¶è¾°åç§°
        function getShiChenName(hour) {
            if (hour === 23) return shiChen[0].name;
            const index = Math.floor((hour + 1) / 2);
            return shiChen[index].name;
        }
        
        // è®¡ç®—ç”Ÿè¾°å…«å­—
        function calculateBazi() {
            const year = parseInt(document.getElementById('yearSelect').value);
            const month = parseInt(document.getElementById('monthSelect').value);
            const day = parseInt(document.getElementById('daySelect').value);
            const hour = parseInt(document.getElementById('hourSelect').value);
            const minute = parseInt(document.getElementById('minuteSelect').value);
            
            // å¹´æŸ±
            const yearGanZhi = getGanZhi(year);
            
            // æœˆæŸ±ï¼ˆç®€åŒ–è®¡ç®—ï¼Œå®é™…éœ€è¦è€ƒè™‘èŠ‚æ°”ï¼‰
            const monthGanIndex = (year * 12 + month) % 10;
            const monthZhiIndex = (month + 1) % 12;
            const monthGanZhi = tianGan[monthGanIndex] + diZhi[monthZhiIndex];
            
            // æ—¥æŸ±ï¼ˆç®€åŒ–è®¡ç®—ï¼‰
            const dayGanIndex = (year + month + day) % 10;
            const dayZhiIndex = (year + month + day) % 12;
            const dayGanZhi = tianGan[dayGanIndex] + diZhi[dayZhiIndex];
            
            // æ—¶æŸ±
            const hourZhi = getHourZhi(hour);
            const hourGanIndex = (dayGanIndex * 2 + Math.floor(hour / 2)) % 10;
            const hourGanZhi = tianGan[hourGanIndex] + hourZhi;
            
            // é˜´å†æ—¥æœŸï¼ˆç®€åŒ–ï¼‰
            const lunar = solarToLunar(year, month, day);
            
            // ç”Ÿè‚–
            const zodiac = getZodiac(year);
            
            // çº³éŸ³äº”è¡Œï¼ˆæ­£ç¡®ç®—æ³•ï¼‰
            const nayinMing = getNaYin(year);
            
            // æ˜¾ç¤ºç»“æœ
            document.getElementById('solarDate').textContent = 
                `${year}å¹´${month}æœˆ${day}æ—¥ ${String(hour).padStart(2, '0')}:${String(minute).padStart(2, '0')}`;
            
            document.getElementById('lunarDate').textContent = 
                `å†œå†${lunar.year}å¹´${lunar.month}æœˆ${lunar.day}æ—¥ ${getShiChenName(hour)}`;
            
            document.getElementById('zodiac').textContent = zodiac;
            
            document.getElementById('yearPillar').textContent = yearGanZhi;
            document.getElementById('monthPillar').textContent = monthGanZhi;
            document.getElementById('dayPillar').textContent = dayGanZhi;
            document.getElementById('hourPillar').textContent = hourGanZhi;
            
            document.getElementById('wuxing').textContent = nayinMing;
            
            // æ˜¾ç¤ºç»“æœåŒºåŸŸ
            document.getElementById('resultBox').classList.add('show');
            
            // æ»šåŠ¨åˆ°ç»“æœ
            document.getElementById('resultBox').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }
        
        // åˆå§‹åŒ–
        initSelectors();
        
        // ç»‘å®šæŒ‰é’®äº‹ä»¶
        document.getElementById('calculateBtn').addEventListener('click', calculateBazi);
    </script>
</body>
</html>
